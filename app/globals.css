@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Base Backgrounds - Lighter & airier for light mode */
    --bg: #f9fafb; 
    --bg-alt: #f4f6fb;
    --bg-mesh-1: #c4d7ff; /* Soft Blue */
    --bg-mesh-2: #e0cffc; /* Soft Purple */
    --bg-mesh-3: #dcfce7; /* Soft Green */

    /* Glass Surface Variables */
    --glass-border: rgba(255, 255, 255, 0.6);
    --glass-surface: rgba(255, 255, 255, 0.65);
    --glass-surface-hover: rgba(255, 255, 255, 0.85);
    --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.08);
    --glass-blur: 24px;
    
    --surface: rgba(255, 255, 255, 0.7);
    --surface-muted: rgba(248, 250, 252, 0.7);
    --surface-strong: rgba(255, 255, 255, 0.95);

    --text: #0b1120;
    --muted: #5b6b82;
    --border: rgba(15, 23, 42, 0.08);

    --primary: #2563eb; 
    --primary-strong: #1d4ed8;
    --primary-glow: rgba(37, 99, 235, 0.25);
    --primary-soft: rgba(37, 99, 235, 0.1);
    --success: #10b981;
    --warning: #f59e0b;
    --danger: #f43f5e;

    --chart-1: #3b82f6;
    --chart-2: #22c55e;
    --chart-3: #f97316;
    --chart-4: #a855f7;
    --chart-5: #14b8a6;
    --chart-6: #e11d48;

    --radius-lg: 24px;
    --radius-md: 18px;
    --radius-sm: 14px;
  }

  .dark {
    /* Deep space / Midnight Apple vibe */
    --bg: #070a12;
    --bg-alt: #0b1020;
    --bg-mesh-1: #0f1528; /* Deep Indigo */
    --bg-mesh-2: #1a0f3f; /* Deep Violet */
    --bg-mesh-3: #0a2b28; /* Deep Emerald */

    /* Glass Surface Variables - Dark */
    --glass-border: rgba(255, 255, 255, 0.08);
    --glass-surface: rgba(20, 20, 24, 0.65);
    --glass-surface-hover: rgba(30, 30, 40, 0.80);
    --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.45);
    
    --surface: rgba(18, 24, 38, 0.7);
    --surface-muted: rgba(16, 22, 36, 0.65);
    --surface-strong: rgba(16, 22, 36, 0.9);

    --text: #eef3ff;
    --muted: #98a4c8;
    --border: rgba(255, 255, 255, 0.08);

    --primary: #61f4ff;
    --primary-strong: #43ffb6;
    --primary-glow: rgba(97, 244, 255, 0.35);
    --primary-soft: rgba(97, 244, 255, 0.15);
    --success: #43ffb6;
    --warning: #fbbf24;
    --danger: #fb7185;

    --chart-1: #61f4ff;
    --chart-2: #43ffb6;
    --chart-3: #8d6bff;
    --chart-4: #ffb86b;
    --chart-5: #38bdf8;
    --chart-6: #fb7185;
  }
}

@supports (color: oklch(0.7 0.1 200)) {
  :root {
    --chart-1: oklch(0.72 0.18 252);
    --chart-2: oklch(0.72 0.18 145);
    --chart-3: oklch(0.78 0.18 60);
    --chart-4: oklch(0.7 0.2 310);
    --chart-5: oklch(0.72 0.12 190);
    --chart-6: oklch(0.7 0.2 20);
  }
  .dark {
    --chart-1: oklch(0.82 0.18 210);
    --chart-2: oklch(0.82 0.16 150);
    --chart-3: oklch(0.84 0.16 285);
    --chart-4: oklch(0.8 0.18 65);
    --chart-5: oklch(0.82 0.14 185);
    --chart-6: oklch(0.78 0.2 20);
  }
}

@layer utilities {
  .appearance-slider-vertical {
    -webkit-appearance: slider-vertical;
    writing-mode: bt-lr; /* IE/Edge */
  }
  
  .text-shadow-sm {
    text-shadow: 0 1px 2px rgba(0,0,0,0.1);
  }
  
  .text-shadow-glow {
    text-shadow: 0 0 10px var(--primary-glow);
  }
  
  .animate-fade-in {
    animation: fadeIn 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
  }
  
  .animate-shimmer {
    background: linear-gradient(
      90deg,
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 255, 255, 0.1) 50%,
      rgba(255, 255, 255, 0) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 2s infinite;
  }
  
  .animate-pulse-slow {
    animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }
  
  .animate-slide-up-fade {
    animation: slideUpFade 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  .reveal {
    animation: reveal 0.45s cubic-bezier(0.2, 0.8, 0.2, 1) both;
  }

  .float-slow {
    animation: float 6s ease-in-out infinite;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  @keyframes shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }
  
  @keyframes slideUpFade {
    0% { opacity: 0; transform: translateY(8px); }
    100% { opacity: 1; transform: translateY(0); }
  }

  @keyframes reveal {
    from { opacity: 0; transform: translateY(10px) scale(0.98); }
    to { opacity: 1; transform: translateY(0) scale(1); }
  }

  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-6px); }
  }
}

@layer components {
  .btn-primary {
    @apply relative inline-flex items-center justify-center rounded-xl bg-primary px-4 py-2 text-sm font-bold text-white shadow-lg transition-all duration-200 hover:-translate-y-0.5 hover:bg-primary-strong hover:shadow-xl active:translate-y-0 active:scale-95 disabled:opacity-50 disabled:pointer-events-none;
  }
  
  .btn-secondary {
    @apply inline-flex items-center justify-center rounded-xl border border-border bg-surface px-4 py-2 text-sm font-semibold text-text shadow-sm transition-all duration-200 hover:-translate-y-0.5 hover:bg-surface-muted hover:shadow-md active:translate-y-0 active:scale-95 disabled:opacity-50;
  }
  
  .btn-ghost {
    @apply inline-flex items-center justify-center rounded-xl px-4 py-2 text-sm font-medium text-muted transition-colors hover:bg-black/5 hover:text-text dark:hover:bg-white/5 active:scale-95;
  }
  
  .input-base {
    @apply w-full rounded-xl border border-border bg-surface-muted px-4 py-2.5 text-sm text-text transition-all placeholder:text-muted focus:border-primary focus:bg-surface focus:outline-none focus:ring-4 focus:ring-primary;
  }

  .view-shell {
    position: relative;
    overflow: hidden;
    isolation: isolate;
    content-visibility: auto;
    contain-intrinsic-size: 800px;
  }

  .view-shell::before {
    content: "";
    position: absolute;
    inset: 0;
    background:
      radial-gradient(120% 80% at 0% 0%, var(--view-accent) 0%, transparent 60%),
      radial-gradient(80% 70% at 100% 0%, var(--view-accent-2) 0%, transparent 70%);
    opacity: 0.9;
    pointer-events: none;
    z-index: 0;
  }

  .view-shell::after {
    content: "";
    position: absolute;
    top: -120px;
    right: -120px;
    width: 240px;
    height: 240px;
    border-radius: 999px;
    background: linear-gradient(140deg, var(--view-accent-2), transparent 65%);
    opacity: 0.5;
    pointer-events: none;
    z-index: 0;
  }

  .view-shell > * {
    position: relative;
    z-index: 1;
  }

  .view-board {
    --view-accent: rgba(37, 99, 235, 0.2);
    --view-accent-2: rgba(14, 116, 144, 0.16);
  }

  .view-planner {
    --view-accent: rgba(245, 158, 11, 0.2);
    --view-accent-2: rgba(16, 185, 129, 0.16);
  }

  .view-preferences {
    --view-accent: rgba(236, 72, 153, 0.2);
    --view-accent-2: rgba(99, 102, 241, 0.18);
  }

  .view-experiments {
    --view-accent: rgba(16, 185, 129, 0.22);
    --view-accent-2: rgba(34, 197, 94, 0.14);
  }

  .view-labs {
    --view-accent: rgba(251, 146, 60, 0.24);
    --view-accent-2: rgba(34, 197, 94, 0.16);
  }

  .view-scripts {
    --view-accent: rgba(148, 163, 184, 0.25);
    --view-accent-2: rgba(59, 130, 246, 0.18);
  }

  .view-integrations {
    --view-accent: rgba(14, 165, 233, 0.22);
    --view-accent-2: rgba(56, 189, 248, 0.16);
  }

  .view-chat {
    --view-accent: rgba(147, 51, 234, 0.2);
    --view-accent-2: rgba(79, 70, 229, 0.18);
  }

  .lab-grid {
    background-image:
      linear-gradient(rgba(15, 23, 42, 0.05) 1px, transparent 1px),
      linear-gradient(90deg, rgba(15, 23, 42, 0.05) 1px, transparent 1px);
    background-size: 28px 28px;
  }

  .dark .lab-grid {
    background-image:
      linear-gradient(rgba(255, 255, 255, 0.06) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255, 255, 255, 0.06) 1px, transparent 1px);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
  
  body {
    @apply bg-bg text-text min-h-screen antialiased selection:bg-primary selection:text-white overflow-x-hidden;
  }

  /* Liquid Background Mesh */
  .liquid-bg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: -1;
    overflow: hidden;
    background: var(--bg);
  }

  .liquid-blob {
    position: absolute;
    filter: blur(80px);
    opacity: 0.6;
    animation: blob-float 20s infinite alternate cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .blob-1 {
    top: -10%;
    left: -10%;
    width: 60vw;
    height: 60vw;
    background: var(--bg-mesh-1);
    animation-delay: 0s;
  }
  
  .blob-2 {
    bottom: -10%;
    right: -10%;
    width: 70vw;
    height: 70vw;
    background: var(--bg-mesh-2);
    animation-delay: -5s;
  }
  
  .blob-3 {
    top: 40%;
    left: 40%;
    width: 50vw;
    height: 50vw;
    background: var(--bg-mesh-3);
    opacity: 0.4;
    animation-delay: -10s;
  }

  @media (prefers-reduced-motion: reduce) {
    .liquid-blob {
      animation: none;
    }
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
  @keyframes blob-float {
    0% { transform: translate(0, 0) scale(1); }
    100% { transform: translate(20px, -20px) scale(1.05); }
  }

  /* Liquid Glass Components */
  .glass-panel {
    @apply backdrop-blur-xl border border-white/20 dark:border-white/10 shadow-lg;
    background: linear-gradient(
      135deg, 
      rgba(255, 255, 255, 0.4) 0%, 
      rgba(255, 255, 255, 0.2) 100%
    );
  }

  .dark .glass-panel {
    background: linear-gradient(
      135deg, 
      rgba(30, 30, 35, 0.6) 0%, 
      rgba(20, 20, 25, 0.4) 100%
    );
  }

  @media (max-width: 768px) {
    .glass-panel {
      backdrop-filter: blur(12px);
    }
    .liquid-blob {
      filter: blur(60px);
      opacity: 0.4;
    }
  }
  
  /* High contrast glass for inputs/active states */
  .glass-panel-active {
     background: rgba(255, 255, 255, 0.65);
     @apply backdrop-blur-2xl border-white/40;
  }
  .dark .glass-panel-active {
     background: rgba(40, 40, 50, 0.75);
     @apply border-white/15;
  }
}

/* Custom Scrollbar - Minimal */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}
::-webkit-scrollbar-track {
  @apply bg-transparent;
}
::-webkit-scrollbar-thumb {
  @apply bg-black/10 dark:bg-white/10 rounded-full transition-colors hover:bg-black/20 dark:hover:bg-white/20;
}
